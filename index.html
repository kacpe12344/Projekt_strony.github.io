<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Rezerwacja Boisk</title>
    <link rel="stylesheet" href="styles.css">
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
       (function(){
          emailjs.init("NSaWlButIzsKk692_");
       })();
    </script>
</head>
<body>
    <div class="container">
        <h1>System Rezerwacji Boisk Sportowych</h1>
        
        <div class="filters">
            <h2>Filtry</h2>
            <div class="filter-group">
                <label for="typ-boiska">Typ boiska:</label>
                <select id="typ-boiska">
                    <option value="wszystkie">Wszystkie</option>
                    <option value="kryte">Kryte</option>
                    <option value="otwarte">Otwarte</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="nawierzchnia">Nawierzchnia:</label>
                <select id="nawierzchnia">
                    <option value="wszystkie">Wszystkie</option>
                    <option value="trawa">Trawa naturalna</option>
                    <option value="sztuczna">Trawa sztuczna</option>
                    <option value="orlik">Orlik</option>
                    <option value="parkiet">Parkiet</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="dzielnica">Dzielnica:</label>
                <select id="dzielnica">
                    <option value="wszystkie">Wszystkie</option>
                    <option value="Bemowo">Bemowo</option>
                    <option value="Białołęka">Białołęka</option>
                    <option value="Bielany">Bielany</option>
                    <option value="Mokotów">Mokotów</option>
                    <option value="Ochota">Ochota</option>
                    <option value="Praga-Południe">Praga-Południe</option>
                    <option value="Praga-Północ">Praga-Północ</option>
                    <option value="Rembertów">Rembertów</option>
                    <option value="Śródmieście">Śródmieście</option>
                    <option value="Targówek">Targówek</option>
                    <option value="Ursus">Ursus</option>
                    <option value="Ursynow">Ursynów</option>
                    <option value="Wawer">Wawer</option>
                    <option value="Wesoła">Wesoła</option>
                    <option value="Wilanów">Wilanów</option>
                    <option value="Włochy">Włochy</option>
                    <option value="Wola">Wola</option>
                    <option value="Żoliborz">Żoliborz</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="dostepnosc">Dostępność:</label>
                <select id="dostepnosc">
                    <option value="wszystkie">Wszystkie</option>
                    <option value="dostepne">Dostępne</option>
                    <option value="niedostepne">Niedostępne</option>
                </select>
            </div>
        </div>
        
        <div id="lista-boisk" class="boiska-lista"></div>
    </div>

    <script>
        // ===== KONFIGURACJA GOOGLE SHEETS =====
        const GOOGLE_SHEETS_URL = 'https://script.google.com/macros/s/AKfycbyu1-DISHivBQmHbl2CIJjzBwxwBjuUqnLd_0UV9MmSM-iAsADbhUmTlb-fV_JNHfo71Q/exec';

        const boiska = [
            { id: 1, nazwa: 'Boisko Sportowa 1', typ: 'kryte', nawierzchnia: 'parkiet', dzielnica: 'Śródmieście', dostepne: true, zarezerwowane: [] },
            { id: 2, nazwa: 'Orlik Mokotów', typ: 'otwarte', nawierzchnia: 'orlik', dzielnica: 'Mokotów', dostepne: true, zarezerwowane: [] },
            { id: 3, nazwa: 'Arena Wola', typ: 'kryte', nawierzchnia: 'sztuczna', dzielnica: 'Wola', dostepne: true, zarezerwowane: [] },
            { id: 4, nazwa: 'Stadion Praga', typ: 'otwarte', nawierzchnia: 'trawa', dzielnica: 'Praga-Południe', dostepne: true, zarezerwowane: [] },
            { id: 5, nazwa: 'Hala Ursynów', typ: 'kryte', nawierzchnia: 'parkiet', dzielnica: 'Ursynow', dostepne: false, zarezerwowane: [] },
            { id: 6, nazwa: 'Boisko Mokotów Park', typ: 'otwarte', nawierzchnia: 'sztuczna', dzielnica: 'Mokotów', dostepne: true, zarezerwowane: [] }
            { id: 7, nazwa: 'SKRA', typ: 'kryte', nawierzchnia: 'sztuczna', dzielnica: 'Ochota', dostepne: true, zarezerwowane: [] }
        ];

        // ===== FUNKCJE GOOGLE SHEETS =====
        async function pobierzRezerwacjeZSheets() {
            try {
                const response = await fetch(GOOGLE_SHEETS_URL);
                const data = await response.json();
                
                boiska.forEach(b => b.zarezerwowane = []);
                
                data.forEach(rez => {
                    const boisko = boiska.find(b => b.id === parseInt(rez.idBoiska));
                    if (boisko) {
                        boisko.zarezerwowane.push({
                            data: rez.data,
                            godzinaOd: rez.godzinaOd,
                            godzinaDo: rez.godzinaDo
                        });
                    }
                });
                
                console.log('Rezerwacje załadowane:', data.length);
            } catch (error) {
                console.error('Błąd pobierania rezerwacji:', error);
            }
        }

        async function zapiszRezerwacjeDoSheets(rezerwacja) {
            try {
                await fetch(GOOGLE_SHEETS_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(rezerwacja)
                });
                console.log('Rezerwacja zapisana do Google Sheets');
                return true;
            } catch (error) {
                console.error('Błąd zapisywania:', error);
                return false;
            }
        }

        function sprawdzDostepnosc(boisko, data) {
            const rezerwacjeNaDzien = boisko.zarezerwowane.filter(rez => rez.data === data);
            if (rezerwacjeNaDzien.length === 0) return true;
            
            rezerwacjeNaDzien.sort((a, b) => {
                const [hA, mA] = a.godzinaOd.split(':').map(Number);
                const [hB, mB] = b.godzinaOd.split(':').map(Number);
                return (hA * 60 + mA) - (hB * 60 + mB);
            });
            
            const godzinaOtwarcia = 8 * 60;
            const godzinaZamkniecia = 22 * 60 + 30;
            let aktualnyPunkt = godzinaOtwarcia;
            
            for (let rez of rezerwacjeNaDzien) {
                const [hOd, mOd] = rez.godzinaOd.split(':').map(Number);
                const [hDo, mDo] = rez.godzinaDo.split(':').map(Number);
                const startRez = hOd * 60 + mOd;
                const koniecRez = hDo * 60 + mDo;
                
                if (startRez > aktualnyPunkt) return true;
                aktualnyPunkt = Math.max(aktualnyPunkt, koniecRez);
            }
            
            return aktualnyPunkt < godzinaZamkniecia;
        }

        function generujGodziny() {
            const godziny = [];
            for (let h = 8; h <= 22; h++) {
                godziny.push(`${h.toString().padStart(2, '0')}:00`);
                if (h < 22) godziny.push(`${h.toString().padStart(2, '0')}:30`);
            }
            return godziny;
        }

        function renderBoiska() {
            const typFilter = document.getElementById('typ-boiska').value;
            const nawierzchniaFilter = document.getElementById('nawierzchnia').value;
            const dzielnicaFilter = document.getElementById('dzielnica').value;
            const dostepnoscFilter = document.getElementById('dostepnosc').value;
            
            const filtrowane = boiska.filter(boisko => {
                const typOk = typFilter === 'wszystkie' || boisko.typ === typFilter;
                const nawierzchniaOk = nawierzchniaFilter === 'wszystkie' || boisko.nawierzchnia === nawierzchniaFilter;
                const dzielnicaOk = dzielnicaFilter === 'wszystkie' || boisko.dzielnica === dzielnicaFilter;
                
                let dostepnoscOk = true;
                if (dostepnoscFilter !== 'wszystkie') {
                    const dzisiaj = new Date().toISOString().split('T')[0];
                    const jutro = new Date();
                    jutro.setDate(jutro.getDate() + 1);
                    const dataJutro = jutro.toISOString().split('T')[0];
                    
                    const jestDostepnyDzisiaj = sprawdzDostepnosc(boisko, dzisiaj);
                    const jestDostepnyJutro = sprawdzDostepnosc(boisko, dataJutro);
                    
                    if (dostepnoscFilter === 'dostepne') {
                        dostepnoscOk = jestDostepnyDzisiaj || jestDostepnyJutro;
                    } else {
                        dostepnoscOk = !jestDostepnyDzisiaj && !jestDostepnyJutro;
                    }
                }
                
                return typOk && nawierzchniaOk && dzielnicaOk && dostepnoscOk;
            });
            
            const listaBoisk = document.getElementById('lista-boisk');
            listaBoisk.innerHTML = '';
            
            if (filtrowane.length === 0) {
                listaBoisk.innerHTML = '<p class="brak-wynikow">Brak boisk spełniających wybrane kryteria</p>';
                return;
            }
            
            const godziny = generujGodziny();
            
            filtrowane.forEach(boisko => {
                const boiskoCard = document.createElement('div');
                boiskoCard.className = 'boisko-card';
                
                let maWolneTerminy = false;
                const dzisiaj = new Date();
                
                for (let i = 0; i < 7; i++) {
                    const dataSprawdzana = new Date(dzisiaj);
                    dataSprawdzana.setDate(dataSprawdzana.getDate() + i);
                    const dataStr = dataSprawdzana.toISOString().split('T')[0];
                    
                    if (sprawdzDostepnosc(boisko, dataStr)) {
                        maWolneTerminy = true;
                        break;
                    }
                }
                
                boiskoCard.innerHTML = `
                    <h3>${boisko.nazwa}</h3>
                    <div class="boisko-info">
                        <p><strong>Typ:</strong> ${boisko.typ}</p>
                        <p><strong>Nawierzchnia:</strong> ${boisko.nawierzchnia}</p>
                        <p><strong>Dzielnica:</strong> ${boisko.dzielnica}</p>
                        <p id="status-boiska-${boisko.id}" class="${maWolneTerminy ? 'dostepne' : 'niedostepne'}">
                            <strong>Status:</strong> ${maWolneTerminy ? 'Dostępne' : 'Brak wolnych terminów'}
                        </p>
                    </div>
                    <div class="rezerwacja-section">
                        <label for="data-${boisko.id}">Wybierz datę:</label>
                        <input type="date" id="data-${boisko.id}" class="data-input" min="${new Date().toISOString().split('T')[0]}">
                        
                        <div id="status-dnia-${boisko.id}" class="status-dnia"></div>
                        
                        <label for="godzina-od-${boisko.id}">Godzina rozpoczęcia:</label>
                        <select id="godzina-od-${boisko.id}" class="godzina-select godzina-od" disabled>
                            <option value="">-- Najpierw wybierz datę --</option>
                            ${godziny.map(g => `<option value="${g}">${g}</option>`).join('')}
                        </select>
                        
                        <label for="godzina-do-${boisko.id}">Godzina zakończenia:</label>
                        <select id="godzina-do-${boisko.id}" class="godzina-select godzina-do" disabled>
                            <option value="">-- Najpierw wybierz datę --</option>
                            ${godziny.map(g => `<option value="${g}">${g}</option>`).join('')}
                        </select>
                        
                        <button class="btn-rezerwuj" data-id="${boisko.id}" disabled>Zarezerwuj</button>
                        <div id="form-${boisko.id}" class="kontakt-form hidden">
                            <input type="email" placeholder="Adres email" id="email-${boisko.id}" required>
                            <small>Podaj poprawny adres email (np. email@domena.pl)</small>
                            <input type="tel" placeholder="Numer telefonu (8 cyfr)" id="sms-${boisko.id}" required maxlength="8">
                            <small>Podaj 8-cyfrowy numer telefonu (tylko cyfry)</small>
                            <button class="btn-potwierdz" data-id="${boisko.id}">Potwierdź rezerwację</button>
                        </div>
                    </div>
                    <div id="zarezerwowane-${boisko.id}" class="zarezerwowane-daty"></div>
                `;
                listaBoisk.appendChild(boiskoCard);
                
                renderZarezerwowane(boisko);
                
                const dataInput = document.getElementById(`data-${boisko.id}`);
                dataInput.addEventListener('change', function() {
                    aktualizujStatusDnia(boisko.id, this.value);
                    renderZarezerwowane(boisko, this.value);
                });
            });
            
            attachEventListeners();
        }

        function renderZarezerwowane(boisko, wybranaData = null) {
    const container = document.getElementById(`zarezerwowane-${boisko.id}`);
    
    if (!wybranaData) {
        container.innerHTML = '';
        return;
    }
    
    const rezerwacjeNaDzien = boisko.zarezerwowane.filter(rez => rez.data === wybranaData);
    
    if (rezerwacjeNaDzien.length > 0) {
        rezerwacjeNaDzien.sort((a, b) => {
            const [hA, mA] = a.godzinaOd.split(':').map(Number);
            const [hB, mB] = b.godzinaOd.split(':').map(Number);
            return (hA * 60 + mA) - (hB * 60 + mB);
        });
        
        container.innerHTML = '<h4>Zajęte godziny w wybranym dniu:</h4>' + 
            rezerwacjeNaDzien.map(rez => `<span class="data-zarezerwowana">${rez.godzinaOd} - ${rez.godzinaDo}</span>`).join('');
    } else {
        container.innerHTML = '<p class="brak-rezerwacji">Brak rezerwacji w tym dniu - wszystkie godziny dostępne!</p>';
    }
}

        function walidujEmail(email) {
            const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            return regex.test(email);
        }

        function walidujTelefon(telefon) {
            const regex = /^[0-9]{9}$/;
            return regex.test(telefon);
        }
        
        

        function aktualizujStatusDnia(boiskoId, data) {
            const boisko = boiska.find(b => b.id === parseInt(boiskoId));
            const statusDiv = document.getElementById(`status-dnia-${boiskoId}`);
            const godzinaOdSelect = document.getElementById(`godzina-od-${boiskoId}`);
            const godzinaDoSelect = document.getElementById(`godzina-do-${boiskoId}`);
            const btnRezerwuj = document.querySelector(`.btn-rezerwuj[data-id="${boiskoId}"]`);
            
            const czyDostepne = sprawdzDostepnosc(boisko, data);
            
            if (czyDostepne) {
                statusDiv.innerHTML = '<p class="dostepne"><strong>✓ Boisko dostępne w tym dniu</strong></p>';
                godzinaOdSelect.disabled = false;
                godzinaDoSelect.disabled = false;
                btnRezerwuj.disabled = false;
                
                const rezerwacjeNaDzien = boisko.zarezerwowane.filter(rez => rez.data === data);
                
                Array.from(godzinaOdSelect.options).forEach(option => {
                    if (option.value) {
                        const [hOpcja, mOpcja] = option.value.split(':').map(Number);
                        const minutyOpcja = hOpcja * 60 + mOpcja;
                        
                        let jestZarezerwowana = false;
                        for (let rez of rezerwacjeNaDzien) {
                            const [hOd, mOd] = rez.godzinaOd.split(':').map(Number);
                            const [hDo, mDo] = rez.godzinaDo.split(':').map(Number);
                            const startRez = hOd * 60 + mOd;
                            const koniecRez = hDo * 60 + mDo;
                            
                            if (minutyOpcja >= startRez && minutyOpcja < koniecRez) {
                                jestZarezerwowana = true;
                                break;
                            }
                        }
                        
                        if (jestZarezerwowana) {
                            option.disabled = true;
                            option.style.color = '#ccc';
                        } else {
                            option.disabled = false;
                            option.style.color = '';
                        }
                    }
                });
                
            } else {
                statusDiv.innerHTML = '<p class="niedostepne"><strong>✗ Brak wolnych terminów w tym dniu</strong></p>';
                godzinaOdSelect.disabled = true;
                godzinaDoSelect.disabled = true;
                godzinaOdSelect.value = '';
                godzinaDoSelect.value = '';
                btnRezerwuj.disabled = true;
            }
            
            aktualizujStatusBoiska(boiskoId);
        }
        
        function aktualizujStatusBoiska(boiskoId) {
            const boisko = boiska.find(b => b.id === parseInt(boiskoId));
            const statusElement = document.querySelector(`#status-boiska-${boiskoId}`);
            
            let maWolneTerminy = false;
            const dzisiaj = new Date();
            
            for (let i = 0; i < 7; i++) {
                const dataSprawdzana = new Date(dzisiaj);
                dataSprawdzana.setDate(dataSprawdzana.getDate() + i);
                const dataStr = dataSprawdzana.toISOString().split('T')[0];
                
                if (sprawdzDostepnosc(boisko, dataStr)) {
                    maWolneTerminy = true;
                    break;
                }
            }
            
            if (statusElement) {
                if (maWolneTerminy) {
                    statusElement.className = 'dostepne';
                    statusElement.innerHTML = '<strong>Status:</strong> Dostępne';
                } else {
                    statusElement.className = 'niedostepne';
                    statusElement.innerHTML = '<strong>Status:</strong> Brak wolnych terminów';
                }
            }
        }

        function attachEventListeners() {
            document.querySelectorAll('.btn-rezerwuj').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.dataset.id;
                    const dataInput = document.getElementById(`data-${id}`);
                    const godzinaOdSelect = document.getElementById(`godzina-od-${id}`);
                    const godzinaDoSelect = document.getElementById(`godzina-do-${id}`);
                    const form = document.getElementById(`form-${id}`);
                    
                    if (!dataInput.value || !godzinaOdSelect.value || !godzinaDoSelect.value) {
                        alert('Proszę wybrać datę, godzinę rozpoczęcia i zakończenia!');
                        return;
                    }
                    
                    const [godzinaOdH, godzinaOdM] = godzinaOdSelect.value.split(':').map(Number);
                    const [godzinaDoH, godzinaDoM] = godzinaDoSelect.value.split(':').map(Number);
                    const minutyOd = godzinaOdH * 60 + godzinaOdM;
                    const minutyDo = godzinaDoH * 60 + godzinaDoM;
                    
                    if (minutyDo <= minutyOd) {
                        alert('Godzina zakończenia musi być późniejsza niż godzina rozpoczęcia!');
                        return;
                    }
                    
                    form.classList.remove('hidden');
                });
            });
            
            document.querySelectorAll('.btn-potwierdz').forEach(btn => {
                btn.addEventListener('click', async function() {
                    const id = parseInt(this.dataset.id);
                    const dataInput = document.getElementById(`data-${id}`);
                    const godzinaOdSelect = document.getElementById(`godzina-od-${id}`);
                    const godzinaDoSelect = document.getElementById(`godzina-do-${id}`);
                    const emailInput = document.getElementById(`email-${id}`);
                    const smsInput = document.getElementById(`sms-${id}`);
                    
                    if (!walidujEmail(emailInput.value)) {
                        alert('Podaj poprawny adres email (np. email@domena.pl)');
                        return;
                    }
                    
                    if (!walidujTelefon(smsInput.value)) {
                        alert('Numer telefonu musi składać się z dokładnie 8 cyfr');
                        return;
                    }
                    
                    if (emailInput.value && smsInput.value && dataInput.value && godzinaOdSelect.value && godzinaDoSelect.value) {
                        const boisko = boiska.find(b => b.id === id);
                        
                        const czyZarezerwowany = boisko.zarezerwowane.some(
                            rez => rez.data === dataInput.value && rez.godzinaOd === godzinaOdSelect.value && rez.godzinaDo === godzinaDoSelect.value
                        );
                        
                        if (!czyZarezerwowany) {
                            btn.innerText = "Zapisywanie...";
                            btn.disabled = true;

                            const rezerwacjaData = {
                                idBoiska: id,
                                nazwaBoiska: boisko.nazwa,
                                dzielnica: boisko.dzielnica,
                                data: dataInput.value,
                                godzinaOd: godzinaOdSelect.value,
                                godzinaDo: godzinaDoSelect.value,
                                email: emailInput.value,
                                telefon: smsInput.value
                            };

                            await zapiszRezerwacjeDoSheets(rezerwacjaData);

                            boisko.zarezerwowane.push({
                                data: dataInput.value,
                                godzinaOd: godzinaOdSelect.value,
                                godzinaDo: godzinaDoSelect.value
                            });

                            const parametryMaila = {
                                email: emailInput.value,
                                nazwa_boiska: boisko.nazwa,
                                dzielnica: boisko.dzielnica,
                                data_rezerwacji: dataInput.value,
                                godzina_od: godzinaOdSelect.value,
                                godzina_do: godzinaDoSelect.value
                            };

                            emailjs.send("service_seba", "template_7v4aiwu", parametryMaila)
                                .then(function(response) {
                                    alert('Rezerwacja potwierdzona! Sprawdź skrzynkę mailową.');
                                    renderBoiska();
                                }, function(error) {
                                    alert('Rezerwacja przyjęta, ale wystąpił błąd przy wysyłaniu maila.');
                                    console.log(error);
                                    renderBoiska();
                                });
                            
                        } else {
                            alert('Ten termin jest już zarezerwowany!');
                        }
                    } else {
                        alert('Proszę wypełnić wszystkie pola!');
                    }
                });
            });
            
            document.querySelectorAll('.godzina-od').forEach(selectOd => {
                selectOd.addEventListener('change', function() {
                    const id = this.id.replace('godzina-od-', '');
                    const selectDo = document.getElementById(`godzina-do-${id}`);
                    const wybranaGodzina = this.value;
                    const dataInput = document.getElementById(`data-${id}`);
                    const boisko = boiska.find(b => b.id === parseInt(id));
                    
                    if (wybranaGodzina && dataInput.value) {
                        const [h, m] = wybranaGodzina.split(':').map(Number);
                        const wybraneMinuty = h * 60 + m;
                        
                        const rezerwacjeNaDzien = boisko.zarezerwowane.filter(rez => rez.data === dataInput.value);
                        
                        let najblizszaRezerwacja = null;
                        for (let rez of rezerwacjeNaDzien) {
                            const [hOd, mOd] = rez.godzinaOd.split(':').map(Number);
                            const startRez = hOd * 60 + mOd;
                            
                            if (startRez > wybraneMinuty) {
                                if (!najblizszaRezerwacja || startRez < najblizszaRezerwacja) {
                                    najblizszaRezerwacja = startRez;
                                }
                            }
                        }
                        
                        Array.from(selectDo.options).forEach(option => {
                            if (option.value) {
                                const [hOpcja, mOpcja] = option.value.split(':').map(Number);
                                const minutyOpcja = hOpcja * 60 + mOpcja;
                                
                                if (minutyOpcja <= wybraneMinuty) {
                                    option.disabled = true;
                                    option.style.color = '#ccc';
                                } 
                                else if (najblizszaRezerwacja && minutyOpcja > najblizszaRezerwacja) {
                                    option.disabled = true;
                                    option.style.color = '#ccc';
                                }
                                else {
                                    option.disabled = false;
                                    option.style.color = '';
                                }
                            }
                        });
                        
                        if (selectDo.value) {
                            const [hDo, mDo] = selectDo.value.split(':').map(Number);
                            const minutyDo = hDo * 60 + mDo;
                            if (minutyDo <= wybraneMinuty || (najblizszaRezerwacja && minutyDo > najblizszaRezerwacja)) {
                                selectDo.value = '';
                            }
                        }
                    }
                });
            });
            
            document.querySelectorAll('input[type="email"]').forEach(input => {
                input.addEventListener('blur', function() {
                    if (this.value && !walidujEmail(this.value)) {
                        this.style.borderColor = '#dc3545';
                    } else {
                        this.style.borderColor = '#28a745';
                    }
                });
            });
            
            document.querySelectorAll('input[type="tel"]').forEach(input => {
                input.addEventListener('input', function() {
                    this.value = this.value.replace(/[^0-9]/g, '');
                    if (this.value.length > 8) {
                        this.value = this.value.slice(0, 8);
                    }
                });
                
                input.addEventListener('blur', function() {
                    if (this.value && !walidujTelefon(this.value)) {
                        this.style.borderColor = '#dc3545';
                    } else if (this.value) {
                        this.style.borderColor = '#28a745';
                    }
                });
            });
        }

        // Event listenery dla filtrów
        document.getElementById('typ-boiska').addEventListener('change', renderBoiska);
        document.getElementById('nawierzchnia').addEventListener('change', renderBoiska);
        document.getElementById('dzielnica').addEventListener('change', renderBoiska);
        document.getElementById('dostepnosc').addEventListener('change', renderBoiska);

        // Inicjalizacja - pobierz rezerwacje i wyrenderuj boiska
        (async function() {
            await pobierzRezerwacjeZSheets();
            renderBoiska();
        })();
    </script>
</body>
</html>